(function(e){function t(t){for(var o,r,c=t[0],s=t[1],i=t[2],u=0,b=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(l,r)&&l[r]&&b.push(l[r][0]),l[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(b.length)b.shift()();return n.push.apply(n,i||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,c=1;c<a.length;c++){var s=a[c];0!==l[s]&&(o=!1)}o&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var o={},l={app:0},n=[];function r(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=o,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(a,o,function(t){return e[t]}.bind(null,o));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var d=s;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"10f3":function(e,t,a){},1988:function(e,t,a){},"4a82":function(e,t,a){"use strict";a("df7f")},6365:function(e,t,a){"use strict";a("cf2e")},"6de8":function(e,t,a){"use strict";a("ca84")},bb48:function(e,t,a){"use strict";a("1988")},ca84:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),l=a("c3a1"),n=a("6605");a("7437");function r(e,t){const a=Object(o["resolveComponent"])("router-view");return Object(o["openBlock"])(),Object(o["createBlock"])(a)}a("bb48");var c=a("6b0d"),s=a.n(c);const i={},d=s()(i,[["render",r]]);var u=d,b=a("bc3a"),p=a.n(b),m={apiSec:"KPsbcc9%eCDcNH636vdL328YSW7i@%F9",apiBase:"http://lzm.ppzxxz.xyz"},O=a("c1a0");const f={class:"simulator"},j={class:"left"},h={class:"right"};function v(e,t,a,l,n,r){const c=Object(o["resolveComponent"])("kline-chart"),s=Object(o["resolveComponent"])("order-book"),i=Object(o["resolveComponent"])("controller"),d=Object(o["resolveComponent"])("trading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createElementVNode"])("div",j,[Object(o["createVNode"])(c,{class:"left-top",data:n.kline},null,8,["data"]),Object(o["createVNode"])(s,{class:"left-bottom"})]),Object(o["createElementVNode"])("div",h,[Object(o["createVNode"])(i,{class:"right-top"}),Object(o["createVNode"])(d,{class:"right-bottom"})])])}const V={class:"controller"},x=Object(o["createElementVNode"])("div",{class:"title"},"controller",-1),y=Object(o["createTextVNode"])("自动"),g=Object(o["createTextVNode"])("手动"),k=Object(o["createTextVNode"])("手动撮合");function C(e,t,a,l,n,r){const c=Object(o["resolveComponent"])("el-date-picker"),s=Object(o["resolveComponent"])("el-form-item"),i=Object(o["resolveComponent"])("el-input"),d=Object(o["resolveComponent"])("el-radio"),u=Object(o["resolveComponent"])("el-radio-group"),b=Object(o["resolveComponent"])("el-input-number"),p=Object(o["resolveComponent"])("el-button"),m=Object(o["resolveComponent"])("el-form");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",V,[x,Object(o["createVNode"])(m,{"label-width":"120px"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(s,{label:"开始时间"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{modelValue:n.controller.startAt,"onUpdate:modelValue":t[0]||(t[0]=e=>n.controller.startAt=e),type:"datetime"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(s,{label:"模拟周期(m)"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{modelValue:n.controller.mockPeriod,"onUpdate:modelValue":t[1]||(t[1]=e=>n.controller.mockPeriod=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(s,{label:"真实周期(s)"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{modelValue:n.controller.realPriod,"onUpdate:modelValue":t[2]||(t[2]=e=>n.controller.realPriod=e)},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(s,{label:"撮合方式"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,{modelValue:n.controller.makeType,"onUpdate:modelValue":t[3]||(t[3]=e=>n.controller.makeType=e)},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,{label:"auto"},{default:Object(o["withCtx"])(()=>[y]),_:1}),Object(o["createVNode"])(d,{label:"manual"},{default:Object(o["withCtx"])(()=>[g]),_:1})]),_:1},8,["modelValue"])]),_:1}),"auto"===n.controller.makeType?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,label:"撮合间隔(s)"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(b,{modelValue:n.controller.autoMakeInterval,"onUpdate:modelValue":t[4]||(t[4]=e=>n.controller.autoMakeInterval=e),min:1},null,8,["modelValue"])]),_:1})):Object(o["createCommentVNode"])("",!0),"manual"===n.controller.makeType?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,label:""},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(p,{type:"primary"},{default:Object(o["withCtx"])(()=>[k]),_:1})]),_:1})):Object(o["createCommentVNode"])("",!0)]),_:1})])}var N={data(){return{controller:{}}}};const w=s()(N,[["render",C]]);var B=w,E=a("c9fd");const I={class:"klinechart-wrapper"};var _=Object(o["defineComponent"])({__name:"KlineChart",props:{data:null},setup(e){const t=e,a=Object(o["ref"])(null),l=Object(o["ref"])(null),n=e=>{a.value&&a.value.applyNewData(e)};return Object(o["onMounted"])(()=>{l.value&&(a.value=Object(E["init"])(l.value),a.value.createTechnicalIndicator("VOL",!1),n(t.data))}),Object(o["watch"])(t.data,e=>{n(e)},{deep:!0,immediate:!0}),(e,t)=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[Object(o["createElementVNode"])("div",{class:"klinechart",ref_key:"chartDivRef",ref:l},null,512)]))}});a("6de8");const S=_;var z=S;const T={class:"order-book"},P={class:"title"},A=Object(o["createElementVNode"])("span",null,"OrderBook",-1),M=Object(o["createElementVNode"])("div",{class:"infos"},[Object(o["createElementVNode"])("span",null,"Long"),Object(o["createElementVNode"])("span",null,"Short")],-1),D={class:"content"};function Y(e,t,a,l,n,r){const c=Object(o["resolveComponent"])("el-option"),s=Object(o["resolveComponent"])("el-select"),i=Object(o["resolveComponent"])("el-table-column"),d=Object(o["resolveComponent"])("el-table");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[Object(o["createElementVNode"])("div",P,[A,Object(o["createVNode"])(s,{modelValue:e.level,"onUpdate:modelValue":t[0]||(t[0]=t=>e.level=t),class:"m-2",size:"small"},{default:Object(o["withCtx"])(()=>[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.levelOptions,e=>(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e,label:e,value:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),M,Object(o["createElementVNode"])("div",D,[Object(o["createVNode"])(d,{data:e.asks,class:"asks"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{prop:"0",label:"Price"}),Object(o["createVNode"])(i,{prop:"1",label:"Size"}),Object(o["createVNode"])(i,{prop:"2",label:"Count"})]),_:1},8,["data"]),Object(o["createVNode"])(d,{data:e.bids,class:"bids"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{prop:"0",label:"Price"}),Object(o["createVNode"])(i,{prop:"1",label:"Size"}),Object(o["createVNode"])(i,{prop:"2",label:"Count"})]),_:1},8,["data"])])])}const L=[.1,1,10];var U={data:()=>({level:1,levelOptions:L,asks:[["1258.29","15","0","2"],["1258.3","7","0","2"]],bids:[["1258.29","15","0","2"],["1258.3","7","0","2"]]})};a("d496");const G=s()(U,[["render",Y]]);var H=G;const $={class:"trading"},W={class:"title"},R=Object(o["createElementVNode"])("span",null,"Trading",-1),K=Object(o["createTextVNode"])("New Account"),F=Object(o["createElementVNode"])("div",{class:""},null,-1);var J=Object(o["defineComponent"])({__name:"Trading",setup(e){return(e,t)=>{const a=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$,[Object(o["createElementVNode"])("div",W,[R,Object(o["createVNode"])(a,{type:"primary"},{default:Object(o["withCtx"])(()=>[K]),_:1})]),F])}}});const q=J;var Q=q,X={components:{Controller:B,KlineChart:z,OrderBook:H,Trading:Q},data(){return{kline:[{close:4976.16,high:4977.99,low:4970.12,open:4972.89,timestamp:1,volume:204},{close:4977.33,high:4979.94,low:4971.34,open:4973.2,timestamp:2,volume:194},{close:4977.93,high:4977.93,low:4974.2,open:4976.53,timestamp:3,volume:197}]}}};a("6365");const Z=s()(X,[["render",v]]);var ee=Z;const te={class:"real-wrapper"},ae={class:"real"},oe=Object(o["createElementVNode"])("div",{class:"title"},"订单表",-1),le={class:"top"},ne=Object(o["createElementVNode"])("br",null,null,-1),re=Object(o["createElementVNode"])("br",null,null,-1),ce={class:"content"},se={class:"chart",ref:"chartRef"};function ie(e,t,a,l,n,r){const c=Object(o["resolveComponent"])("el-date-picker"),s=Object(o["resolveComponent"])("el-form-item"),i=Object(o["resolveComponent"])("el-input"),d=Object(o["resolveComponent"])("el-button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",te,[Object(o["createElementVNode"])("div",ae,[oe,Object(o["createElementVNode"])("div",le,[Object(o["createVNode"])(s,{label:"时间范围"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,{modelValue:n.daterange,"onUpdate:modelValue":t[0]||(t[0]=e=>n.daterange=e),type:"datetimerange",size:"small"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(s,{label:"周期间隔"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{type:"number",min:"0",modelValue:n.interval,"onUpdate:modelValue":t[1]||(t[1]=e=>n.interval=e),size:"small",placeholder:"周期间隔(ms)"},null,8,["modelValue"])]),_:1}),Object(o["createVNode"])(d,{size:"small",type:"primary",onClick:r.fetchData,loading:n.loading},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.loading?"加载中":"刷新"),1)]),_:1},8,["onClick","loading"]),ne,Object(o["createVNode"])(s,{label:"播放间隔"},{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(i,{type:"number",min:"0",modelValue:n.playInterval,"onUpdate:modelValue":t[2]||(t[2]=e=>n.playInterval=e),size:"small",placeholder:"播放间隔(ms)"},null,8,["modelValue"])]),_:1}),re]),Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("div",se,null,512)])])])}a("d9e2");var de=a("22b4"),ue=a("1be7"),be=a("541a"),pe=a("9394"),me=a("5a72"),Oe=a("2da7"),fe=a("4b2a"),je=a("4cb5"),he=a("f95e");function ve(e){return p.a.post("/orderbook/list",{apiSec:m.apiSec,...e})}var Ve=a("3ef4"),xe=a("5a0c"),ye=a.n(xe);a("2ef0");de["a"]([be["a"],pe["a"],me["a"],Oe["a"],fe["a"],je["a"],he["a"]]);var ge={data(){return{interval:5e3,playInterval:1e3,loading:!1,daterange:[ye()().subtract(5,"minute"),ye()()],orderBooks:[],asks:[{name:12201,value:744,count:12},{name:12202,value:123,count:12},{name:12203,value:444,count:12},{name:12204,value:12,count:12},{name:12205,value:1235,count:12}],bids:[{name:12201,value:744,count:12},{name:12202,value:123,count:12},{name:12203,value:444,count:12},{name:12204,value:12,count:12},{name:12205,value:1235,count:12}]}},mounted(){this.initChart(),window.addEventListener("resize",()=>{this.chartInstance&&this.chartInstance.resize()}),this.fetchData()},computed:{chartOption(){const e="#3bab87",t="#a65c59",a="#0f352a",o="#3b1c1a",l=[];let n=1;const r=this.orderBooks.length;for(const d of this.orderBooks){const e=Math.max(...d.asks.map(e=>e.value).filter(Boolean),...d.bids.map(e=>e.value).filter(Boolean)),t=d.asks,a=d.bids,o=t.map(t=>({...t,value:e})),c=a.map(t=>({...t,value:e}));l.push({title:{text:`${ye()(d.ts).format("YYYY-MM-DD HH:mm:ss:SSS")} (${n++}/${r})`},xAxis:[{max:e},{max:e}],yAxis:[{data:a.map(e=>e.name||"")},{data:t.map(e=>e.name||"")}],series:[{data:a},{data:c},{data:t},{data:o}]})}const c=this.orderBooks.map(e=>ye()(e.ts).format("MM-DD HH:mm:ss:SSS")),s=2,i={backgroundColor:"#111111",title:{text:"YYYY-MM-DD HH:mm:ss:SSS",left:s+"%",top:s+"%",padding:[5,0],textStyle:{fontWeight:"bold",fontSize:14,color:"#acacac"}},grid:[{show:!0,left:s+"%",top:s+10.5+"%",width:50-s+"%",height:"77%",borderColor:"#1f1f1f"},{show:!0,right:s+"%",top:s+10.5+"%",width:50-s+"%",height:"77%",borderColor:"#1f1f1f"}],tooltip:{formatter:e=>{const{componentType:t,data:a,componentSubType:o}=e;return"timeline"===t&&this.orderBooks[a]?ye()(this.orderBooks[a].ts).format("YYYY-MM-DD HH:mm:ss:SSS"):"bar"===o?`价格：${a.name}<br/>合约张数：${a.oValue}<br/>订单数量：${a.count}`:""}},graphic:{elements:[{type:"text",top:s+4+"%",left:s+"%",style:{text:"买入",fill:"#b0b0b0",lineWidth:1},z:999},{type:"text",top:s+4+"%",left:"51%",style:{text:"卖出",fill:"#b0b0b0",lineWidth:1},z:999},{type:"text",top:s+8+"%",left:s+"%",style:{text:"数量(张)",fill:"#747474",lineWidth:1},z:999},{type:"text",top:s+8+"%",left:"center",style:{text:"价格",fill:"#747474",lineWidth:1},z:999},{type:"text",top:s+8+"%",right:s+"%",style:{text:"数量(张)",fill:"#747474",lineWidth:1},z:999}]},xAxis:[{gridIndex:0,inverse:!0,show:!1,type:"value"},{gridIndex:1,show:!1,type:"value"}],yAxis:[{gridIndex:0,type:"category",inverse:!0,position:"right",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:e,margin:-8,align:"right",formatter:function(e){return"undefined"!==e&&e?e:""}},z:10},{gridIndex:1,type:"category",inverse:!0,axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:t,margin:-5,align:"left",formatter:function(e){return"undefined"!==e&&e?e:""}},z:10}],options:l,timeline:{playInterval:this.playInterval,axisType:"category",data:c,bottom:s+"%",left:3*s+"%",right:3*s+"%"},series:[{type:"bar",xAxisIndex:0,yAxisIndex:0,barCategoryGap:"0%",color:a,barGap:"-100%",datasetIndex:0,animation:!1},{type:"bar",xAxisIndex:0,yAxisIndex:0,barCategoryGap:"0%",color:"transparent",barGap:"-100%",datasetIndex:1,label:{show:!0,formatter:({data:e})=>e.oValue,position:"insideLeft",style:{color:"#fff"}},animation:!1},{type:"bar",xAxisIndex:1,yAxisIndex:1,datasetIndex:2,barCategoryGap:"0%",barGap:"-100%",color:o,animation:!1},{type:"bar",xAxisIndex:1,yAxisIndex:1,datasetIndex:3,barCategoryGap:"0%",barGap:"-100%",color:"transparent",label:{show:!0,formatter:({data:e})=>e.oValue,position:"insideRight",style:{color:"#fff"}},animation:!1}]};return i}},methods:{initChart(){this.chartInstance=ue["b"](this.$refs.chartRef),this.setChartOption()},async fetchData(){try{this.loading=!0;const e=this.daterange;if(2!==e.length)throw new Error("请输入时间范围");const t=e[0].valueOf(),a=e[1].valueOf();if(a>t+36e5)throw new Error("查询范围控制在一小时内");const o=await ve({tsGte:t,tsLte:a,interval:parseInt(this.interval)});o.data.data.forEach(e=>{e.asks=e.data.asks.map(e=>({name:e[0],value:e[1],oValue:e[1],count:e[2]})),e.asks.length=10,e.bids=e.data.bids.map(e=>({name:e[0],value:e[1],oValue:e[1],count:e[2]})).reverse(),e.bids.length=10,delete e.data}),this.orderBooks=o.data.data}catch(e){Object(Ve["a"])({showClose:!0,type:"error",message:"查询出错："+e.toString()})}finally{this.loading=!1}},setChartOption(){this.chartInstance&&this.chartInstance.setOption(this.chartOption)}},watch:{chartOption(){this.$nextTick(this.setChartOption)}}};a("4a82");const ke=s()(ge,[["render",ie]]);var Ce=ke;p.a.defaults.baseURL=m.apiBase,p.a.interceptors.response.use(e=>{var t,a,o;return 200===e.status?e.data&&0!==(null===(t=e.data)||void 0===t?void 0:t.code)?Promise.reject(null!==(a=null===(o=e.data)||void 0===o?void 0:o.msg)&&void 0!==a?a:"请求出错"):Promise.resolve(e):Promise.reject(e)},e=>e.response&&e.response.data&&e.response.data.msg?Promise.reject(e.response.data.msg):Promise.reject(e));const Ne=[{path:"/simulator",component:ee},{path:"/",component:Ce}],we=Object(n["a"])({history:Object(n["b"])(),routes:Ne}),Be=Object(o["createApp"])(u);Be.use(l["a"],{locale:O["a"]}),Be.use(we),Be.mount("#app")},cf2e:function(e,t,a){},d496:function(e,t,a){"use strict";a("10f3")},df7f:function(e,t,a){}});
//# sourceMappingURL=app.59e1461d.js.map